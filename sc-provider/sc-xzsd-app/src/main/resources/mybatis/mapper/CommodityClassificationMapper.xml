<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xzsd.app.client.commodityClassification.dao.CommodityClassificationDao">
<!--    查询父分类列表-->
    <select id="listFatherCate" resultType="com.xzsd.app.client.commodityClassification.entity.CommodityClassificationInfo">
        select
        cate_code cateCode,
        cate_name cateName
        from
        t_sys_classification
        where is_deleted = 0
        and is_parent = 0
    </select>

<!--映射-->
    <resultMap id="sonCateList" type="com.xzsd.app.client.commodityClassification.entity.ListSonCateGoodsInfo">
        <id property="cateCodeSon" column="cate_code"></id>
        <result property="cateNameSon" column="cate_name"></result>
        <collection property="listSonGoods" ofType="ListSonGoods" javaType="java.util.List" column="cate_code" select="getByCateCode"></collection>
    </resultMap>
<!--    查询该分类的子分类列表-->
    <select id="listSonCateGoods" parameterType="com.xzsd.app.client.commodityClassification.entity.ListSonCateGoodsInfo" resultMap="sonCateList">
        select
        cate_code ,
        cate_name
        from t_sys_classification
        where is_deleted = 0
        and cate_code_parent = #{cateCode}
    </select>

    <!--    查询该子分类商品列表-->
    <select id="getByCateCode" parameterType="java.lang.String" resultType="com.xzsd.app.client.commodityClassification.entity.ListSonGoods">
        select
        sku_no skuNo,
        picture_url pictureUrl,
        sku_name skuName,
        selling_price sellingPrice
        from t_sys_goods
        where is_deleted = 0
        and cate_code = #{cate_code}
        order by create_time asc
    </select>


</mapper>
